-- test if True
%% if True "Hello World"
-- expect
Hello World

-- test if False
Before
%% if False "Hello World" "A"
fter
-- expect
Before
After

-- test if with single expression
%% if False "Hello World" 4 '2' "0"
-- expect
420

-- test if with boolean ops, true
%% if False or True "Hello World"
-- expect
Hello World

-- test if with boolean ops, false
Before
%% if True and True and False "Hello World"
After
-- expect
Before
After

-- test if with semi-colons and end, true
[% if True;
     "Hello World";
   end
%]
-- expect
Hello World

-- test if with semi-colons and end, false
Before[% if False; "Hello World"; end %]
After
-- expect
Before
After

-- test if with boolean ops, false
Before
%% if True and True and False "Hello World"
After
-- expect
Before
After

-- test if with braces
[% if True { "Hello World" } %]
-- expect
Hello World

-- test if with separate tags
[% if True %]Hell[% 'o W' %]orld[% end %]
-- expect
Hello World

-- test if yielding value
%%  x = if True "Hello World";
%%  y = (if False "Goodbye World");
Foo
[% x %]![% y %]
-- expect
Foo
Hello World!

-- test if yielding value
%%  x = if True "Hello World";
%%  y = (if False "Goodbye World");
Foo
[% x %]![% y %]
-- expect
Foo
Hello World!

-- test if yielding values
%%  list = [if True "Hello"; if True "World"; if False "Blah"]
%%  list.length " items: " list.text
-- expect
2 items: HelloWorld

-- test if with else, true
%% if True "foo" else "bar"
-- expect
foo

-- test if with else, false
%% if False "foo" else "bar"
-- expect
bar

-- test if with else block to end
%% if False "foo" else; "b" 'a' "r"; end
-- expect
bar

-- test if with else block and separate tags
[% if False "foo" else %]b[% 'a' %]r[% end %]
-- expect
bar

-- test if with else block and curly braces
[%  if False {
        "foo" 
    }
    else {
        "bar"
    }
%]
-- expect
bar

-- test multiple ifs
[%  if False {
        "foo" 
    }
    else if True {
        "bar"
    }
    else if Whatever {
        "baz"
    }
%]
-- expect
bar

-- test multiple ifs with single expressions
[%  if False
        "foo" 
    else if True
        "bar"
    else if Whatever
        "baz"
%]
-- expect
bar

-- test multiple ifs with single expressions and semi-colons
[%  if False;
        "foo"; 
    else if True;
        "bar";
    else if Whatever;
        "baz";
    end;
%]
-- expect
bar

-- start --

-- test elsif with end
[%  if False;
        "FAIL";
    elsif True;
        "PASS";
    end;
%]
-- expect
PASS
