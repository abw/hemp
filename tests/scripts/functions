-- test function call
%% msg = 'Hello World'
msg: [% msg('Badger', x=20, y=30) %]
-- expect
msg: Hello World

-- test quick hack
[%  name = 'Nobody';    # until we get this working properly

    sub msg; 
        "Hello " name "!"; 
    end; 
    
    msg( name = 'World' )
%]
-- expect --
Hello World!


-- test argless function with explicit call --
[%  sub msg; 
        "Hello World!"; 
    end; 
    
    msg()       # note the parens
%]
-- expect --
Hello World!


-- test argless named function with implicit call --
[%  sub msg; 
        "Hello World!"; 
    end; 
    
    msg         # note the lack of parens
%]
-- expect --
Hello World!

-- test anonymous argless function --
[%  msg = sub; 
        "Hello World!";
    end;

    msg 
%]
-- expect --
Hello World!

-- stop --
-- test named function with an arg --
[%  name = 'Nobody';    # until we get this working properly

    sub msg(name, age, height); 
        'Hello ' name '!';
    end;

    msg; #('World') 
%]
-- expect --
Hello World!



-- test anonymous function with an arg --
[%  msg = sub(name); 
        'Hello ' name '!';
    end;

    msg('World') 
%]
-- expect --
Hello World!

-- test function reference --
[%  sub msg(name); 
        'Hello ' name '!';
    end; 
    
    m2 = msg    # note the lack of parens - remains a function ref
    m2('World');
%]
-- expect --
Hello World!

